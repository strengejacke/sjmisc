<!-- Generated by pkgdown: do not edit by hand -->
<!DOCTYPE html>
<html lang="en">
  <head>
  <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>Merges multiple imputed data frames into a single data frame — merge_imputations • sjmisc</title>

<!-- favicons -->
<link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png">
<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png" />
<link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png" />
<link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png" />
<link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png" />

<!-- jquery -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script>
<!-- Bootstrap -->
<link href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.4.0/flatly/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous" />


<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script>

<!-- bootstrap-toc -->
<link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script>

<!-- Font Awesome icons -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous" />
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous" />

<!-- clipboard.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script>

<!-- headroom.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script>

<!-- pkgdown -->
<link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script>




<meta property="og:title" content="Merges multiple imputed data frames into a single data frame — merge_imputations" />
<meta property="og:description" content="This function merges multiple imputed data frames from
               mice::mids()-objects into a single data frame
               by computing the mean or selecting the most likely imputed value." />
<meta property="og:image" content="/logo.png" />




<!-- mathjax -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script>

<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->



  </head>

  <body data-spy="scroll" data-target="#toc">
    <div class="container template-reference-topic">
      <header>
      <div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">sjmisc</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">2.8.5</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="../articles/design_philosophy.html">The Design Philosophy of Functions in sjmisc</a>
    </li>
    <li>
      <a href="../articles/exploringdatasets.html">Exploring Data Sets</a>
    </li>
    <li>
      <a href="../articles/recodingvariables.html">Recoding Variables</a>
    </li>
  </ul>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="https://github.com/strengejacke/sjmisc/">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
      
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header>

<div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Merges multiple imputed data frames into a single data frame</h1>
    <small class="dont-index">Source: <a href='https://github.com/strengejacke/sjmisc/blob/master/R/merge_imputations.R'><code>R/merge_imputations.R</code></a></small>
    <div class="hidden name"><code>merge_imputations.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>This function merges multiple imputed data frames from
               <code><a href='https://amices.org/mice/reference/mids-class.html'>mice::mids()</a></code>-objects into a single data frame
               by computing the mean or selecting the most likely imputed value.</p>
    </div>

    <pre class="usage"><span class='fu'>merge_imputations</span><span class='op'>(</span>
  <span class='va'>dat</span>,
  <span class='va'>imp</span>,
  ori <span class='op'>=</span> <span class='cn'>NULL</span>,
  summary <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='st'>"none"</span>, <span class='st'>"dens"</span>, <span class='st'>"hist"</span>, <span class='st'>"sd"</span><span class='op'>)</span>,
  filter <span class='op'>=</span> <span class='cn'>NULL</span>
<span class='op'>)</span></pre>

    <h2 class="hasAnchor" id="arguments"><a class="anchor" href="#arguments"></a>Arguments</h2>
    <table class="ref-arguments">
    <colgroup><col class="name" /><col class="desc" /></colgroup>
    <tr>
      <th>dat</th>
      <td><p>The data frame that was imputed and used as argument in the
<code><a href='https://amices.org/mice/reference/mice.html'>mice</a></code>-function call.</p></td>
    </tr>
    <tr>
      <th>imp</th>
      <td><p>The <code><a href='https://amices.org/mice/reference/mids-class.html'>mice::mids()</a></code>-object with the imputed data frames
from <code>dat</code>.</p></td>
    </tr>
    <tr>
      <th>ori</th>
      <td><p>Optional, if <code>ori</code> is specified, the imputed variables are
appended to this data frame; else, a new data frame with the imputed
variables is returned.</p></td>
    </tr>
    <tr>
      <th>summary</th>
      <td><p>After merging multiple imputed data, <code>summary</code> displays
a graphical summary of the "quality" of the merged values, compared
to the original imputed values.</p><dl>
  <dt><code>"dens"</code></dt><dd><p>Creates a density plot, which shows the distribution of the mean
    of the imputed values for each variable at each observation. The
    larger the areas overlap, the better is the fit of the merged
    value compared to the imputed value.</p></dd>
  <dt><code>"hist"</code></dt><dd><p>Similar to <code>summary = "dens"</code>, however, mean and merged
    values are shown as histogram. Bins should have almost equal
    height for both groups (mean and merged).</p></dd>
  <dt><code>"sd"</code></dt><dd><p>Creates a dot plot, where data points indicate the standard
    deviation for all imputed values (y-axis) at each merged
    value (x-axis) for all imputed variables. The higher the
    standard deviation, the less precise is the imputation, and
    hence the merged value.</p></dd>

</dl></td>
    </tr>
    <tr>
      <th>filter</th>
      <td><p>A character vector with variable names that should be plotted.
All non-defined variables will not be shown in the plot.</p></td>
    </tr>
    </table>

    <h2 class="hasAnchor" id="value"><a class="anchor" href="#value"></a>Value</h2>

    <p>A data frame with (merged) imputed variables; or <code>ori</code> with
        appended imputed variables, if <code>ori</code> was specified.
        If <code>summary</code> is included, returns a list with the data frame
        <code>data</code> with (merged) imputed variables and some other summary
        information, including the <code>plot</code> as ggplot-object.</p>
    <h2 class="hasAnchor" id="details"><a class="anchor" href="#details"></a>Details</h2>

    <p>This method merges multiple imputations of variables into a single
         variable by computing the (rounded) mean of all imputed values
         of missing values. By this, each missing value is replaced by
         those values that have been imputed the most times.
         <br /> <br />
         <code>imp</code> must be a <code>mids</code>-object, which is returned by the
         <code><a href='https://amices.org/mice/reference/mice.html'>mice()</a></code>-function of the <span class="pkg">mice</span>-package. <code>merge_imputations()</code>
         than creates a data frame for each imputed variable, by combining all
         imputations (as returned by the <code><a href='https://amices.org/mice/reference/complete.mids.html'>complete</a></code>-function)
         of each variable, and computing the row means of this data frame.
         The mean value is then rounded for integer values (and not for numerical
         values with fractional part), which corresponds to the most frequent
         imputed value (mode) for a missing value. Missings in the original variable
         are replaced by the most frequent imputed value.</p>
    <h2 class="hasAnchor" id="note"><a class="anchor" href="#note"></a>Note</h2>

    <p>Typically, further analyses are conducted on pooled results of multiple
      imputed data sets (see <code><a href='https://amices.org/mice/reference/pool.html'>pool</a></code>), however, sometimes
      (in social sciences) it is also feasible to compute the mean or mode
      of multiple imputed variables (see <cite>Burns et al. 2011</cite>).</p>
    <h2 class="hasAnchor" id="references"><a class="anchor" href="#references"></a>References</h2>

    <p>Burns RA, Butterworth P, Kiely KM, Bielak AAM, Luszcz MA, Mitchell P, et al. 2011. Multiple imputation was an efficient method for harmonizing the Mini-Mental State Examination with missing item-level data. Journal of Clinical Epidemiology;64:787-93 doi: <a href='https://doi.org/10.1016/j.jclinepi.2010.10.011'>10.1016/j.jclinepi.2010.10.011</a></p>

    <h2 class="hasAnchor" id="examples"><a class="anchor" href="#examples"></a>Examples</h2>
    <pre class="examples"><div class='input'><span class='kw'>if</span> <span class='op'>(</span><span class='kw'><a href='https://rdrr.io/r/base/library.html'>require</a></span><span class='op'>(</span><span class='st'><a href='https://github.com/amices/mice'>"mice"</a></span><span class='op'>)</span><span class='op'>)</span> <span class='op'>{</span>
  <span class='va'>imp</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://amices.org/mice/reference/mice.html'>mice</a></span><span class='op'>(</span><span class='va'>nhanes</span><span class='op'>)</span>

  <span class='co'># return data frame with imputed variables</span>
  <span class='fu'>merge_imputations</span><span class='op'>(</span><span class='va'>nhanes</span>, <span class='va'>imp</span><span class='op'>)</span>

  <span class='co'># append imputed variables to original data frame</span>
  <span class='fu'>merge_imputations</span><span class='op'>(</span><span class='va'>nhanes</span>, <span class='va'>imp</span>, <span class='va'>nhanes</span><span class='op'>)</span>

  <span class='co'># show summary of quality of merging imputations</span>
  <span class='fu'>merge_imputations</span><span class='op'>(</span><span class='va'>nhanes</span>, <span class='va'>imp</span>, summary <span class='op'>=</span> <span class='st'>"dens"</span>, filter <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='st'>"chl"</span>, <span class='st'>"hyp"</span><span class='op'>)</span><span class='op'>)</span>
<span class='op'>}</span>
</div><div class='output co'>#&gt; <span class='message'>Loading required package: mice</span></div><div class='output co'>#&gt; <span class='message'></span>
#&gt; <span class='message'>Attaching package: ‘mice’</span></div><div class='output co'>#&gt; <span class='message'>The following object is masked from ‘package:stats’:</span>
#&gt; <span class='message'></span>
#&gt; <span class='message'>    filter</span></div><div class='output co'>#&gt; <span class='message'>The following objects are masked from ‘package:base’:</span>
#&gt; <span class='message'></span>
#&gt; <span class='message'>    cbind, rbind</span></div><div class='output co'>#&gt; 
#&gt;  iter imp variable
#&gt;   1   1  bmi  hyp  chl
#&gt;   1   2  bmi  hyp  chl
#&gt;   1   3  bmi  hyp  chl
#&gt;   1   4  bmi  hyp  chl
#&gt;   1   5  bmi  hyp  chl
#&gt;   2   1  bmi  hyp  chl
#&gt;   2   2  bmi  hyp  chl
#&gt;   2   3  bmi  hyp  chl
#&gt;   2   4  bmi  hyp  chl
#&gt;   2   5  bmi  hyp  chl
#&gt;   3   1  bmi  hyp  chl
#&gt;   3   2  bmi  hyp  chl
#&gt;   3   3  bmi  hyp  chl
#&gt;   3   4  bmi  hyp  chl
#&gt;   3   5  bmi  hyp  chl
#&gt;   4   1  bmi  hyp  chl
#&gt;   4   2  bmi  hyp  chl
#&gt;   4   3  bmi  hyp  chl
#&gt;   4   4  bmi  hyp  chl
#&gt;   4   5  bmi  hyp  chl
#&gt;   5   1  bmi  hyp  chl
#&gt;   5   2  bmi  hyp  chl
#&gt;   5   3  bmi  hyp  chl
#&gt;   5   4  bmi  hyp  chl
#&gt;   5   5  bmi  hyp  chl</div><div class='img'><img src='merge_imputations-1.png' alt='' width='700' height='433' /></div></pre>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top">
      <h2 data-toc-skip>Contents</h2>
    </nav>
  </div>
</div>


      <footer>
      <div class="copyright">
  <p>Developed by <a href='https://github.com/strengejacke'>Daniel Lüdecke</a>.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.6.1.9000.</p>
</div>

      </footer>
   </div>

  


  </body>
</html>


