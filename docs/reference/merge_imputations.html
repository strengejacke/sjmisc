<!-- Generated by pkgdown: do not edit by hand -->
<!DOCTYPE html>
<html>
  <head>
  <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>Merges multiple imputed data frames into a single data frame — merge_imputations • sjmisc</title>

<!-- jquery -->
<script src="https://code.jquery.com/jquery-3.1.0.min.js" integrity="sha384-nrOSfDHtoPMzJHjVTdCopGqIqeYETSXhZDFyniQ8ZHcVy08QesyHcnOUpMpqnmWq" crossorigin="anonymous"></script>
<!-- Bootstrap -->

<link href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script>

<!-- Font Awesome icons -->
<link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.6.3/css/font-awesome.min.css" rel="stylesheet" integrity="sha384-T8Gy5hrqNKT+hzMclPo118YTQO6cYprQmhrYwIiQ/3axmI1hQomh7Ud2hPOy8SP1" crossorigin="anonymous">

<!-- clipboard.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/1.7.1/clipboard.min.js" integrity="sha384-cV+rhyOuRHc9Ub/91rihWcGmMmCXDeksTtCihMupQHSsi8GIIRDG0ThDc3HGQFJ3" crossorigin="anonymous"></script>

<!-- sticky kit -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/sticky-kit/1.1.3/sticky-kit.min.js" integrity="sha256-c4Rlo1ZozqTPE2RLuvbusY3+SU1pQaJC0TjuhygMipw=" crossorigin="anonymous"></script>

<!-- pkgdown -->
<link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script>



<meta property="og:title" content="Merges multiple imputed data frames into a single data frame — merge_imputations" />

<meta property="og:description" content="This function merges multiple imputed data frames from
               mids-objects into a single data frame
               by computing the mean or selecting the most likely imputed value." />

<meta property="og:image" content="/logo.png" />
<meta name="twitter:card" content="summary" />



<!-- mathjax -->
<script src='https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML'></script>

<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->


  </head>

  <body>
    <div class="container template-reference-topic">
      <header>
      <div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">sjmisc</a>
        <span class="label label-default" data-toggle="tooltip" data-placement="bottom" title="Released package">2.7.3.9000</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="../index.html">
    <span class="fa fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="../articles/design_philosophy.html">The Design Philosophy of Functions in sjmisc</a>
    </li>
    <li>
      <a href="../articles/exploringdatasets.html">Exploring Data Sets</a>
    </li>
  </ul>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul>
      
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="https://github.com/strengejacke/sjmisc">
    <span class="fa fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
      
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      
      </header>

<div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Merges multiple imputed data frames into a single data frame</h1>
    <small class="dont-index">Source: <a href='https://github.com/strengejacke/sjmisc/blob/master/R/merge_imputations.R'><code>R/merge_imputations.R</code></a></small>
    <div class="hidden name"><code>merge_imputations.Rd</code></div>
    </div>

    <div class="ref-description">
    
    <p>This function merges multiple imputed data frames from
               <code><a href='http://stefvanbuuren.github.io/mice/reference/mids-class.html'>mids</a></code>-objects into a single data frame
               by computing the mean or selecting the most likely imputed value.</p>
    
    </div>

    <pre class="usage"><span class='fu'>merge_imputations</span>(<span class='no'>dat</span>, <span class='no'>imp</span>, <span class='kw'>ori</span> <span class='kw'>=</span> <span class='kw'>NULL</span>, <span class='kw'>summary</span> <span class='kw'>=</span> <span class='fu'>c</span>(<span class='st'>"none"</span>, <span class='st'>"dens"</span>,
  <span class='st'>"hist"</span>, <span class='st'>"sd"</span>), <span class='kw'>filter</span> <span class='kw'>=</span> <span class='kw'>NULL</span>)</pre>
    
    <h2 class="hasAnchor" id="arguments"><a class="anchor" href="#arguments"></a>Arguments</h2>
    <table class="ref-arguments">
    <colgroup><col class="name" /><col class="desc" /></colgroup>
    <tr>
      <th>dat</th>
      <td><p>The data frame that was imputed and used as argument in the
<code><a href='http://stefvanbuuren.github.io/mice/reference/mice.html'>mice</a></code>-function call.</p></td>
    </tr>
    <tr>
      <th>imp</th>
      <td><p>The <code><a href='http://stefvanbuuren.github.io/mice/reference/mids-class.html'>mids</a></code>-object with the imputed data frames
from <code>dat</code>.</p></td>
    </tr>
    <tr>
      <th>ori</th>
      <td><p>Optional, if <code>ori</code> is specified, the imputed variables are
appended to this data frame; else, a new data frame with the imputed
variables is returned.</p></td>
    </tr>
    <tr>
      <th>summary</th>
      <td><p>After merging multiple imputed data, <code>summary</code> displays
a graphical summary of the "quality" of the merged values, compared
to the original imputed values.</p><dl class='dl-horizontal'>
  <dt><code>"dens"</code></dt><dd><p>Creates a density plot, which shows the distribution of the mean
    of the imputed values for each variable at each observation. The
    larger the areas overlap, the better is the fit of the merged
    value compared to the imputed value.</p></dd>
  <dt><code>"hist"</code></dt><dd><p>Similar to <code>summary = "dens"</code>, however, mean and merged
    values are shown as histogram. Bins should have almost equal
    height for both groups (mean and merged).</p></dd>
  <dt><code>"sd"</code></dt><dd><p>Creates a dot plot, where data points indicate the standard
    deviation for all imputed values (y-axis) at each merged
    value (x-axis) for all imputed variables. The higher the
    standard deviation, the less precise is the imputation, and
    hence the merged value.</p></dd>
</dl></td>
    </tr>
    <tr>
      <th>filter</th>
      <td><p>A character vector with variable names that should be plotted.
All non-defined variables will not be shown in the plot.</p></td>
    </tr>
    </table>
    
    <h2 class="hasAnchor" id="value"><a class="anchor" href="#value"></a>Value</h2>

    <p>A data frame with (merged) imputed variables; or <code>ori</code> with
        appended imputed variables, if <code>ori</code> was specified.
        If <code>summary</code> is included, returns a list with the data frame
        <code>data</code> with (merged) imputed variables and some other summary
        information, which are required for the plot-output.</p>
    
    <h2 class="hasAnchor" id="details"><a class="anchor" href="#details"></a>Details</h2>

    <p>This method merges multiple imputations of variables into a single
         variable by computing the (rounded) mean of all imputed values
         of missing values. By this, each missing value is replaced by
         those values that have been imputed the most times.
         <br /> <br />
         <code>imp</code> must be a <code>mids</code>-object, which is returned by the
         <code><a href='http://stefvanbuuren.github.io/mice/reference/mice.html'>mice()</a></code>-function of the <span class="pkg">mice</span>-package. <code>merge_imputations()</code>
         than creates a data frame for each imputed variable, by combining all
         imputations (as returned by the <code><a href='http://stefvanbuuren.github.io/mice/reference/complete.html'>complete</a></code>-function)
         of each variable, and computing the row means of this data frame.
         The mean value is then rounded for integer values (and not for numerical
         values with fractional part), which corresponds to the most frequent
         imputed value (mode) for a missing value. Missings in the original variable
         are replaced by the most frequent imputed value.</p>
    
    <h2 class="hasAnchor" id="note"><a class="anchor" href="#note"></a>Note</h2>

    <p>Typically, further analyses are conducted on pooled results of multiple
      imputed data sets (see <code><a href='http://stefvanbuuren.github.io/mice/reference/pool.html'>pool</a></code>), however, sometimes
      (in social sciences) it is also feasible to compute the mean or mode
      of multiple imputed variables (see <cite>Burns et al. 2011</cite>).</p>
    
    <h2 class="hasAnchor" id="references"><a class="anchor" href="#references"></a>References</h2>

    <p>Burns RA, Butterworth P, Kiely KM, Bielak AAM, Luszcz MA, Mitchell P, et al. 2011. Multiple imputation was an efficient method for harmonizing the Mini-Mental State Examination with missing item-level data. Journal of Clinical Epidemiology;64:787–93 doi: <a href='http://doi.org/10.1016/j.jclinepi.2010.10.011'>10.1016/j.jclinepi.2010.10.011</a></p>
    

    <h2 class="hasAnchor" id="examples"><a class="anchor" href="#examples"></a>Examples</h2>
    <pre class="examples"><div class='input'><span class='fu'>library</span>(<span class='no'>mice</span>)</div><div class='output co'>#&gt; <span class='message'>Loading required package: lattice</span></div><div class='output co'>#&gt; <span class='message'></span>
#&gt; <span class='message'>Attaching package: 'mice'</span></div><div class='output co'>#&gt; <span class='message'>The following objects are masked from 'package:base':</span>
#&gt; <span class='message'></span>
#&gt; <span class='message'>    cbind, rbind</span></div><div class='input'><span class='no'>imp</span> <span class='kw'>&lt;-</span> <span class='fu'><a href='http://stefvanbuuren.github.io/mice/reference/mice.html'>mice</a></span>(<span class='no'>nhanes</span>)</div><div class='output co'>#&gt; 
#&gt;  iter imp variable
#&gt;   1   1  bmi  hyp  chl
#&gt;   1   2  bmi  hyp  chl
#&gt;   1   3  bmi  hyp  chl
#&gt;   1   4  bmi  hyp  chl
#&gt;   1   5  bmi  hyp  chl
#&gt;   2   1  bmi  hyp  chl
#&gt;   2   2  bmi  hyp  chl
#&gt;   2   3  bmi  hyp  chl
#&gt;   2   4  bmi  hyp  chl
#&gt;   2   5  bmi  hyp  chl
#&gt;   3   1  bmi  hyp  chl
#&gt;   3   2  bmi  hyp  chl
#&gt;   3   3  bmi  hyp  chl
#&gt;   3   4  bmi  hyp  chl
#&gt;   3   5  bmi  hyp  chl
#&gt;   4   1  bmi  hyp  chl
#&gt;   4   2  bmi  hyp  chl
#&gt;   4   3  bmi  hyp  chl
#&gt;   4   4  bmi  hyp  chl
#&gt;   4   5  bmi  hyp  chl
#&gt;   5   1  bmi  hyp  chl
#&gt;   5   2  bmi  hyp  chl
#&gt;   5   3  bmi  hyp  chl
#&gt;   5   4  bmi  hyp  chl
#&gt;   5   5  bmi  hyp  chl</div><div class='input'>
<span class='co'># return data frame with imputed variables</span>
<span class='fu'>merge_imputations</span>(<span class='no'>nhanes</span>, <span class='no'>imp</span>)</div><div class='output co'>#&gt;      bmi hyp chl
#&gt; 1  27.64   1 167
#&gt; 2  22.70   1 187
#&gt; 3  28.26   1 187
#&gt; 4  23.06   2 206
#&gt; 5  20.40   1 113
#&gt; 6  23.38   2 184
#&gt; 7  22.50   1 118
#&gt; 8  30.10   1 187
#&gt; 9  22.00   1 238
#&gt; 10 26.26   2 193
#&gt; 11 29.24   1 153
#&gt; 12 23.96   1 176
#&gt; 13 21.70   1 206
#&gt; 14 28.70   2 204
#&gt; 15 29.60   1 196
#&gt; 16 29.68   1 166
#&gt; 17 27.20   2 284
#&gt; 18 26.30   2 199
#&gt; 19 35.30   1 218
#&gt; 20 25.50   2 205
#&gt; 21 27.22   1 207
#&gt; 22 33.20   1 229
#&gt; 23 27.50   1 131
#&gt; 24 24.90   1 212
#&gt; 25 27.40   1 186</div><div class='input'>
<span class='co'># append imputed variables to original data frame</span>
<span class='fu'>merge_imputations</span>(<span class='no'>nhanes</span>, <span class='no'>imp</span>, <span class='no'>nhanes</span>)</div><div class='output co'>#&gt;    age  bmi hyp chl bmi_imp hyp_imp chl_imp
#&gt; 1    1   NA  NA  NA   27.64       1     167
#&gt; 2    2 22.7   1 187   22.70       1     187
#&gt; 3    1   NA   1 187   28.26       1     187
#&gt; 4    3   NA  NA  NA   23.06       2     206
#&gt; 5    1 20.4   1 113   20.40       1     113
#&gt; 6    3   NA  NA 184   23.38       2     184
#&gt; 7    1 22.5   1 118   22.50       1     118
#&gt; 8    1 30.1   1 187   30.10       1     187
#&gt; 9    2 22.0   1 238   22.00       1     238
#&gt; 10   2   NA  NA  NA   26.26       2     193
#&gt; 11   1   NA  NA  NA   29.24       1     153
#&gt; 12   2   NA  NA  NA   23.96       1     176
#&gt; 13   3 21.7   1 206   21.70       1     206
#&gt; 14   2 28.7   2 204   28.70       2     204
#&gt; 15   1 29.6   1  NA   29.60       1     196
#&gt; 16   1   NA  NA  NA   29.68       1     166
#&gt; 17   3 27.2   2 284   27.20       2     284
#&gt; 18   2 26.3   2 199   26.30       2     199
#&gt; 19   1 35.3   1 218   35.30       1     218
#&gt; 20   3 25.5   2  NA   25.50       2     205
#&gt; 21   1   NA  NA  NA   27.22       1     207
#&gt; 22   1 33.2   1 229   33.20       1     229
#&gt; 23   1 27.5   1 131   27.50       1     131
#&gt; 24   3 24.9   1  NA   24.90       1     212
#&gt; 25   2 27.4   1 186   27.40       1     186</div><div class='input'>
<span class='co'># show summary of quality of merging imputations</span>
<span class='fu'>merge_imputations</span>(<span class='no'>nhanes</span>, <span class='no'>imp</span>, <span class='kw'>summary</span> <span class='kw'>=</span> <span class='st'>"dens"</span>, <span class='kw'>filter</span> <span class='kw'>=</span> <span class='fu'>c</span>(<span class='st'>"chl"</span>, <span class='st'>"hyp"</span>))</div><div class='img'><img src='merge_imputations-1.png' alt='' width='700' height='433' /></div><div class='input'>
</div></pre>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="sidebar">
    <h2>Contents</h2>
    <ul class="nav nav-pills nav-stacked">
      <li><a href="#arguments">Arguments</a></li>
      
      <li><a href="#value">Value</a></li>

      <li><a href="#details">Details</a></li>

      <li><a href="#note">Note</a></li>

      <li><a href="#references">References</a></li>
      
      <li><a href="#examples">Examples</a></li>
    </ul>

  </div>
</div>

      <footer>
      <div class="copyright">
  <p>Developed by Daniel Lüdecke.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="http://pkgdown.r-lib.org/">pkgdown</a>.</p>
</div>

      </footer>
   </div>

  

  </body>
</html>

